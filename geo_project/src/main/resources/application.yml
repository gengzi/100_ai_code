server:
  port: 8095

spring:
  application:
    name: geo-platform
  ai:
    openai:
      api-key: sk-wkekvkigaytxuokxdcbrcimuugyawdnxevihgwvxwerdmzqa
      chat:
        options:
          model: "deepseek-ai/DeepSeek-V3"
          temperature: 0.7
          max-tokens: 4000
      base-url: "https://api.siliconflow.cn"
  datasource:
    # 使用H2文件数据库，数据持久化到磁盘
    url: jdbc:h2:file:./data/geodb;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
    driver-class-name: org.h2.Driver
    username: sa
    password:
    # 连接池配置
    hikari:
      connection-timeout: 20000
      maximum-pool-size: 10

  jpa:
    hibernate:
      ddl-auto: update  # 自动更新表结构
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        # H2数据库特定配置
        dialect: org.hibernate.dialect.H2Dialect
        # 启用批处理优化
        jdbc.batch_size: 20
        order_inserts: true
        order_updates: true

  h2:
    console:
      enabled: true
      path: /h2-console
      # 允许外部访问控制台
      settings:
        web-allow-others: true

# Spring AI配置 (兼容SiliconFlow OpenAI API)

# GEO平台配置
geo:
  platform:
    # AI配置 (Spring AI会覆盖这些配置，但保留作为备份)
    ai:
      url: "https://api.siliconflow.cn/v1/chat/completions"
      key: "sk-wkekvkigaytxuokxdcbrcimuugyawdnxevihgwvxwerdmzqa"
      model: "deepseek-ai/DeepSeek-V3"
      timeout: 60000
      temperature: 0.7
      max-tokens: 4000

    # 发布配置
    publish:
      storage-state-path: "./storage-states"
      headless: false
      timeout: 30000
      publish-interval: 2000
      auto-retry: true
      max-retries: 3

    # 平台配置
    platform:
      weibo:
        name: "weibo"
        base-url: "https://weibo.com"
        publish-url: "https://weibo.com/compose"
      xiaohongshu:
        name: "xiaohongshu"
        base-url: "https://www.xiaohongshu.com"
        publish-url: "https://creator.xiaohongshu.com/publish/publish"
      zhihu:
        name: "zhihu"
        base-url: "https://www.zhihu.com"
        publish-url: "https://zhuanlan.zhihu.com/write"
      douyin:
        name: "douyin"
        base-url: "https://www.douyin.com"
        publish-url: "https://creator.douyin.com"
      # 新增国内内容平台配置
      csdn:
        name: "csdn"
        base-url: "https://blog.csdn.net"
        publish-url: "https://editor.csdn.net/md?not_checkout=1"
      juejin:
        name: "juejin"
        base-url: "https://juejin.cn"
        publish-url: "https://juejin.cn/editor?type=markdown"
      jianshu:
        name: "jianshu"
        base-url: "https://www.jianshu.com"
        publish-url: "https://www.jianshu.com/writer#/"
      cnblogs:
        name: "cnblogs"
        base-url: "https://www.cnblogs.com"
        publish-url: "https://i.cnblogs.com/posts/edit"
      oschina:
        name: "oschina"
        base-url: "https://www.oschina.net"
        publish-url: "https://my.oschina.net/blog/new"
      segmentfault:
        name: "segmentfault"
        base-url: "https://segmentfault.com"
        publish-url: "https://segmentfault.com/write"

# 日志配置
logging:
  level:
    com.geo.platform: DEBUG
    com.microsoft.playwright: INFO
    root: INFO
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"